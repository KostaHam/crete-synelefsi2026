<!DOCTYPE html>
<html lang="de">
  <head>
    <title>ΣΥΝΕΛΕΥΣΗ ΠΕΡΙΦΕΡΕΙΑΣ ΚΡΗΤΗ 2026</title>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="index.css" />
    <link rel="stylesheet" href="/index.css">

    <!-- Firebase SDKs -->
    <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-database-compat.js"></script>

    <script>
      // Firebase-Konfiguration
      const firebaseConfig = {
  apiKey: "AIzaSyAni0T5TFTjuZjFEFC_sh8cxgsme5iMiDM",
  authDomain: "crete-f2354.firebaseapp.com",
  projectId: "crete-f2354",
  storageBucket: "crete-f2354.firebasestorage.app",
  messagingSenderId: "709466530046",
  appId: "1:709466530046:web:8e0e921b11b8d7617485af"
      };

      firebase.initializeApp(firebaseConfig);
      const db = firebase.database();
    </script>
  </head>

  <body>
    <main id="app">
      <h1>ΣΥΝΕΛΕΥΣΗ ΠΕΡΙΦΕΡΕΙΑΣ ΚΡΗΤΗ 2026</h1>
      <ul id="name-list"></ul>
      <div id="total-container">
        <span>ΣΥΝΟΛΟ:</span>
        <span id="total-sum">0</span>
      </div>
    </main>

    <script>
      const nameList = document.getElementById("name-list");
      const totalSum = document.getElementById("total-sum");

      // Echtzeit-Listener für Firebase
      db.ref("names").on("value", (snapshot) => {
        const data = snapshot.val() || {};
        nameList.innerHTML = "";
        const names = Object.values(data);
        names.forEach((entry) => {
          const li = document.createElement("li");
          li.textContent = entry.name;
          nameList.appendChild(li);
        });
        totalSum.textContent = names.length;
      });

      // Funktion zum Hinzufügen eines Namens (kann später durch Formular o.Ä. ersetzt werden)
      function addName(name) {
        const newRef = db.ref("names").push();
        newRef.set({ name });
      }

      // Beispiel: Test hinzufügen
      // addName("Γιώργος");
    </script>

    <script src="index.js" defer></script>
    <script type="module" src="/index.tsx"></script>
  </body>
</html>
