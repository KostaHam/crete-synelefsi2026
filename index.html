<!DOCTYPE html>
<html lang="de">
  <head>
    <title>ΣΥΝΕΛΕΥΣΗ ΠΕΡΙΦΕΡΕΙΑΣ ΚΡΗΤΗ 2026</title>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="index.css" />
    <link rel="stylesheet" href="/index.css">
  </head>
  <body>
    <main id="app">
      <h1>ΣΥΝΕΛΕΥΣΗ ΠΕΡΙΦΕΡΕΙΑΣ ΚΡΗΤΗ 2026</h1>
      <ul id="name-list"></ul>
      <div id="total-container">
        <span>ΣΥΝΟΛΟ:</span>
        <span id="total-sum">0</span>
      </div>
    </main>

    <!-- Firebase SDK -->
    <script type="module">
      // Import Firebase modules
      import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-app.js";
      import { getFirestore, collection, onSnapshot } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-firestore.js";

      // Your Firebase config
      const firebaseConfig = {
        apiKey: "AIzaSyAni0T5TFTjuZjFEFC_sh8cxgsme5iMiDM",
        authDomain: "crete-f2354.firebaseapp.com",
        projectId: "crete-f2354",
        storageBucket: "crete-f2354.firebasestorage.app",
        messagingSenderId: "709466530046",
        appId: "1:709466530046:web:8e0e921b11b8d7617485af"
      };

      // Initialize Firebase
      const app = initializeApp(firebaseConfig);
      const db = getFirestore(app);

      // Reference to the collection
      const namesCol = collection(db, "names");

      // DOM elements
      const nameList = document.getElementById("name-list");
      const totalSum = document.getElementById("total-sum");

      // Listen for real-time updates
      onSnapshot(namesCol, (snapshot) => {
        nameList.innerHTML = ""; // Clear list
        let count = 0;

        snapshot.forEach(doc => {
          const data = doc.data();
          const li = document.createElement("li");
          li.textContent = data.name;
          nameList.appendChild(li);
          count++;
        });

        totalSum.textContent = count;
      });
    </script>

    <!-- Dein bestehendes JavaScript/TypeScript -->
    <script src="index.js" defer></script>
    <script type="module" src="/index.tsx"></script>
  </body>
</html>
